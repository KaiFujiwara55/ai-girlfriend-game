# 🌸 AI彼女告白ゲーム（改良版）

深化したキャラクターとの心温まる会話を楽しめる、CLI版恋愛シミュレーションゲームです。

## ✨ 特徴

### 🎭 深化したキャラクターシステム
- **詳細な性格設定**: 価値観、背景、話し方の特徴まで細かく設定
- **3つの個性豊かなキャラクター**: さくら（優しい）、あや（ツンデレ）、みさき（知的）
- **関係性段階**: 初対面から恋人まで6段階の関係発展

### 💭 高度な感情システム  
- **多層的感情管理**: 気分、信頼度、緊張度、好感度、興味度の5つの感情軸
- **動的関係性判定**: 感情状態に基づく関係性の自動更新
- **キャラクター別反応**: 性格に応じた感情変動パターン

### 🤖 AIプロバイダー対応
- **複数AI対応**: Claude、OpenAI（GPT）など複数のAIモデルをサポート
- **自動切り替え**: 利用可能なプロバイダーを自動検出
- **プロンプト最適化**: キャラクターと関係性に最適化されたプロンプト生成

### 📝 会話管理システム
- **会話履歴追跡**: 過去の会話を記憶し一貫性を保持
- **話題分析**: 13カテゴリの話題自動検出
- **推奨話題提案**: キャラクターの興味に基づく話題提案

## 🚀 セットアップ

### 前提条件
- Node.js 18.x以上
- TypeScript 5.x以上

### インストール
```bash
# 依存関係のインストール
npm install

# TypeScriptコンパイル
npm run build
```

### 環境設定

#### 🆓 推奨: Google Gemini API（無料）
1. [Google AI Studio](https://aistudio.google.com/app/apikey) でAPIキーを取得
2. 無料で1日1500リクエストまで利用可能

```bash
# 環境変数ファイルをコピー
cp .env.example .env

# .envファイルを編集してGemini APIキーを設定
# GEMINI_API_KEY=your-gemini-api-key-here
```

#### その他のプロバイダー
- **Claude**: ANTHROPIC_API_KEY（有料）
- **OpenAI**: OPENAI_API_KEY（有料）

最低1つのAPIキーがあればゲームを開始できます。

## 🎮 使用方法

### ゲーム開始
```bash
# 開発モード
npm run dev

# 本番モード
npm start
```

### 基本操作
- **自然な会話**: 普通に話しかけてください
- **`status`**: 現在の感情状態と関係を確認
- **`help`**: ヘルプを表示  
- **`告白`**: 告白を試みる（十分な好感度が必要）
- **`quit`**: ゲーム終了

## 🏗️ アーキテクチャ

```
src/
├── types/           # 型定義
│   ├── ai-provider.ts
│   └── game.ts
├── providers/       # AIプロバイダー
│   ├── claude-provider.ts
│   ├── openai-provider.ts  
│   └── ai-provider-factory.ts
├── characters/      # キャラクター設定
│   └── character-data.ts
├── systems/         # ゲームシステム
│   ├── emotion-system.ts
│   ├── prompt-system.ts
│   ├── conversation-manager.ts
│   └── dialogue-system.ts
├── game-engine.ts   # メインゲームエンジン
└── index.ts        # エントリーポイント
```

## 🎯 キャラクター紹介

### さくら（初級）
- **性格**: 素直で優しい、少し天然
- **背景**: 田舎の大家族出身、料理が得意
- **成功条件**: 好感度60以上
- **特徴**: 家族思いで温かい性格、料理の話が大好き

### あや（中級）  
- **性格**: ツンデレ、プライド高い、実は寂しがり
- **背景**: 成績優秀だが友人が少ない完璧主義者
- **成功条件**: 好感度75以上
- **特徴**: 「べ、別に〜」が口癖、素直になれない

### みさき（上級）
- **性格**: クールで知的、論理的思考重視
- **背景**: 研究者家庭出身、高いIQを持つ
- **成功条件**: 好感度90以上  
- **特徴**: 丁寧な敬語、感情表現が苦手

## 🔧 カスタマイズ

### 新しいAIプロバイダーの追加
1. `src/providers/`に新しいプロバイダークラスを作成
2. `AIProvider`インターフェースを実装
3. `ai-provider-factory.ts`に登録

### キャラクターの追加・編集
`src/characters/character-data.ts`でキャラクター設定を変更可能

## 📈 今後の拡張予定

- [ ] 画像対応AI（GPT-4 Vision等）との連携
- [ ] セーブ/ロード機能
- [ ] 追加キャラクター
- [ ] Web版の開発
- [ ] 多言語対応

## 🤝 コントリビューション

プルリクエストやイシューは歓迎です！

## 📄 ライセンス

MIT License